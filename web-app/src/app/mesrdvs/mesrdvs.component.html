<div class="container">
  <div class="card-header d-flex my-4">
    <h2 class="h2 me-4">Mes Rendez-Vous </h2>
    <button class="btn btn-info btn-sm float-right ms-4"
            *ngIf="sec.kc.hasRealmRole('COUTURIER')"
            (click)="declarerConge()">DÃ©clarer Mes CongÃ©s</button>
  </div>


  <div class="card-body" *ngIf="this.sec.kc.hasRealmRole('CUSTOMER')">
    <div class="table " >
      <thead class="table-info">
      <tr>
        <th>ID</th><th>Date</th><th>Heure</th><th>Status</th><th >Couturier</th> <th>Action</th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let m of todays |async">
        <td>{{m.id}}</td>
        <td>{{m.rdvDate| date: 'dd-MM-yyyy'}}</td>
        <td>{{m.heure}}</td>
        <td>{{m.status}}</td>
        <td>{{m.couturierId}}</td>
        <td>
          <button [disabled]="toCancel == (m.rdvDate| date: 'dd-MM-yyyy') || m.status=='ANNULE'"
                  class="btn btn-warning btn-sm float-right" (click)="cancelRdv(m)">Cancel</button>
        </td>

      </tr>
      </tbody>
    </div>
    <div class="table " >
      <thead class="table-info">
      <tr>
        <th>ID</th><th>Date</th><th>Heure</th><th>Status</th><th >Couturier</th>

      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let m of olds |async">
        <td>{{m.id}}</td>
        <td>{{m.rdvDate| date: 'dd-MM-yyyy'}}</td>
        <td>{{m.heure}}</td>
        <td>{{m.status}}</td>
        <td>{{m.couturierId}}</td>
      </tr>
      </tbody>
    </div>
  </div>


  <div class="card-body d-flex" *ngIf="sec.kc.hasRealmRole('COUTURIER')">
    <div class="table " >
      <thead class="table-info">
      <tr>
        <th>ID</th><th>Date</th><th>Heure</th><th>Status</th>
        <th>Customer</th>
        <th>Action</th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let m of todays |async" >
          <td>{{m.id}}</td>
          <td>{{m.rdvDate| date: 'dd-MM-yyyy'}}</td>
          <td>{{m.heure}}</td>
          <td>{{m.status}}</td>
          <td>{{m.customerId}}</td>
          <td >
            <button *ngIf="m.status=='PRIS'" class="btn btn-info btn-sm float-right"
                    (click)="newOrder(m)"
                    [disabled]="(m.rdvDate | date: 'dd-MM-yyyy')!=(lyom| date: 'dd-MM-yyyy')">
              <i class="bi bi-cart-fill" title="New Order"></i></button>
            <button *ngIf="m.status=='CONGE'"
                    class="btn btn-info btn-sm float-right"(click)="cancelConge(m)">
              <i class="bi bi-x" title="ANNULER"></i></button>
          </td>
      </tr>
      </tbody>
    </div>

    <div class="table" >
      <thead class="table-info">
      <tr>
        <th>ID</th><th>Date</th><th>Heure</th><th>Status</th> <th>Customer</th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let m of olds |async">
        <td>{{m.id}}</td>
        <td>{{m.rdvDate| date: 'dd-MM-yyyy'}}</td>
        <td>{{m.heure}}</td>
        <td>{{m.status}}</td>
        <td>{{m.customerId}}</td>
      </tr>
      </tbody>
    </div>
  </div>
</div>

